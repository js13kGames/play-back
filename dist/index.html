<style>body{margin:0;padding:0;background:#000}#c,#h,#l,#o{position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;box-sizing:border-box}#h,#l,#o{color:#fff;background:rgba(0,0,0,.5);opacity:0;transition:opacity .5s}#l,#o{text-align:center;font:9vh fantasy;padding-top:40vh}#h{padding:9vh;font:15px fantasy}</style><canvas id="c"></canvas><div id="o"><b>Space to Retry</b></div><div id="s"><b>Game Saved</b></div><div id="h"></div><div id="l"></div><script>let aa=(a,b)=>a.reduce((e,d,f)=>e&&d==b[f],!0),ba=(a,b)=>{b=a.indexOf(b);0<=b&&a.splice(b,1)},da=(a,b,e)=>{a=[0,0,a,b];let d=[];ca(a,a,(f,g)=>{g||d.push([]);d[f].push(e(f,g))});return d},ea=(a,b)=>{for(let e in a)b(a[e],e)};let fa=[0,7E-5],ha=[1209,1336,1477],ia=[697,770,852,941];let ja=a=>{let [b,e,d]=a;return`hsl(${b},${e}%,${d}%)`},la=(a,b,e,d,f)=>{ka(a,b,e,b.ta,d,f)},ka=(a,b,e,d,f,g)=>{d&&d.forEach(k=>{a.save();ma(a,k.I,1);g.forEach(m=>ma(a,b.Sa[m.Oa][k.id],m.progress));ka(a,b,e,k.mb,f,g);null!=k.J&&b.oa[k.J].forEach(m=>{a.beginPath();var n;if(8>m.length){let [p,u,v,x,w,r,q]=m,t,y,C;r&&(r.length?[n,t,y,C]=r:n=t=y=C=r);n=n||0;t=t||0;y=y||0;C=C||0;a.moveTo(p+n,u);a.arcTo(p+v,u,p+v,u+t,t);a.arcTo(p+v,u+x,p+v-y,u+x,y);a.arcTo(p,u+x,p,u+C,C);a.arcTo(p,u,p+n,u,n);m=w;n=q}else{let [p,u,v,x,w,r,q,t]=m;a.moveTo(p,u);a.lineTo(v,x);a.lineTo(w,r);a.lineTo(p,u);m=q;n=t}a.fillStyle=ja(e[m]);a.fill();null!=n&&(a.strokeStyle=ja(e[n]),a.lineWidth=1,a.stroke())});ka(a,b,e,k.fa,f,g);f(a,k);a.restore()})},ma=(a,b,e)=>{b&&b.forEach(d=>{switch(d.B){case 0:a.scale(1-(1-d.ca)*e,1-(1-d.da)*e);break;case 1:a.translate(d.D*e,d.G*e);break;case 2:a.translate(d.Pa||0,d.Qa||0);a.rotate(d.angle*e);a.translate(-d.Pa||0,-d.Qa||0);break;case 3:a.globalAlpha=d.opacity*e}})};let G=[{K:[48]},{K:[49]},{K:[50]},{K:[51]},{K:[52]},{K:[53]},{K:[54]},{K:[55]},{K:[56]},{K:[57]},{},{K:[87,38],name:"up",na:1},{K:[83,40],name:"down",na:1},{K:[65,37],name:"left",ka:2,na:1},{K:[68,39],name:"right",ka:2,na:1},{K:[74,32],name:"jump"},{name:"say"},{K:[188],Ra:">",name:"rewind",ka:9,na:1},{K:[190],Ra:"<",name:"fast forward",ka:9,na:1},{name:"stop"},{K:[80],name:"pick up",ka:6},{K:[76],name:"drop",ka:8},{K:[84],name:"throw",ka:7},{K:[73],name:"insert",ka:5},{K:[75],name:"eject"},{K:[77],name:"play",ka:9,na:1},{K:[82],name:"record",na:1},{K:[72],name:"help"},{name:"save"},{name:"shoot"}],na={},oa={},ra=a=>{G.forEach((b,e)=>{b.K&&b.K.forEach(d=>na[d]=e);oa[e]=b.ka;{let d=pa(e);b.utterance=d&&qa(a,d)}})},pa=a=>{a=G[a];return a.name||a.Ra||a.K&&String.fromCharCode(a.K[0])};let K=(a,b,e)=>{let d=a.ga,f=G[b].na,g=d.V[b],k=d.wa[b]||0;return(!a.$||0<=a.$.indexOf(b))&&g&&(f||k<g)?(d.wa[b]=e,1):0},sa=(a,b,e,d)=>{let f=a.ga;if(!a.$||0<=a.$.indexOf(b))if(!d&&(a=a.N.ha[oa[b]])&&(d=a.O),d)return b=e-f.V[b],(b/d|0)!=((b+19)/d|0)};let ta=[[-1,0],[0,-1],[1,0],[0,1]];let ua=(a,b)=>R(a,b,([e,d],[f,g])=>{d=e+d;g=f+g;return e>=f&&e<g?g-e:f>=e&&f<d?d-f:0}),va=(a,b)=>{a=ua(a,b);return a[0]*a[1]},wa=(a,b)=>R(a,b,([e,d],[,f])=>[Math.max(0,Math.floor(e)),Math.min(Math.floor(e+d),f-1)]),ca=(a,b,e)=>{if(a){let [[d,f],[g,k]]=wa(a,b);for(a=d;a<=f;a++)for(b=g;b<=k;b++)e(a,b)}};let xa=(a,b)=>0==b%2,ya=(a,b)=>0<b%2;let R=(a,b,e,d=[],f=0)=>{d[f]=e(a.filter(xa),b.filter(xa));d[f+1]=e(a.filter(ya),b.filter(ya));return d};let Aa=(a,b,e)=>(d,f,g=1)=>{f=a.currentTime+.3*g;let k=a.createOscillator(),m=a.createOscillator();k.frequency.value=b/(g*d);m.frequency.value=e/(g*d);let n=a.createGain();n.gain.value=d/9;d=a.createBiquadFilter();d.type="lowpass";d.frequency.value=8E3/g;k.connect(n);m.connect(n);n.connect(d);d.connect(a.destination);k.start();m.start();k.stop(f);m.stop(f);k.onended=()=>{[n].map(za)}};let U=(a,b,e,d,f,g,k,m,n)=>(p,u,v=1)=>{u=a.currentTime;let x=a.createOscillator();x.frequency.setValueAtTime(f/v,u);x.frequency.linearRampToValueAtTime(g/v,u+b*v);x.type=d;let w=a.createGain();Ca(w,u,e*p,.05*p,0*v,.2*b*v,b*v);let r;m&&(p=a.createOscillator(),p.frequency.value=n/v,p.type=m,r=a.createGain(),r.gain.value=-999,p.connect(r),r.connect(x.detune),p.start(),p.stop(u+b));k?(p=a.createBiquadFilter(),p.type=k<f?"highpass":"lowpass",p.Q.value=0,p.frequency.value=k/v,x.connect(p),p.connect(w)):x.connect(w);w.connect(a.destination);x.start();x.stop(u+b);x.onended=function(){[w].map(za)}};let za=a=>{a&&a.disconnect()},Ca=(a,b,e,d,f,g,k)=>{a.gain.value=0;a.gain.setValueAtTime(0,b);a.gain.linearRampToValueAtTime(e,b+f);a.gain.linearRampToValueAtTime(d,b+g);a.gain.linearRampToValueAtTime(0,b+k)};function Da(a){var b=a.sampleRate,e=.05*b|0,d=a.createBuffer(1,e,b);for(b=d.getChannelData(0);e--;)b[e]=2*Math.random()-1;return f=>{var g=a.createBufferSource();g.buffer=d;g.loop=!0;var k=a.createBiquadFilter();k.type="lowpass";k.Q.value=0;k.frequency.value=2E3;var m=a.createGain();Ca(m,a.currentTime,.1*f,.05*f,.01,.05*.2,.05);g.connect(k);k.connect(m);m.connect(a.destination);g.start();g.stop(a.currentTime+.05);g.onended=function(){m&&m.disconnect()}}}let qa=(a,b)=>{let e=.2*b.length,d=a.sampleRate;var f=a.createBuffer(1,e*d|0,d),g=f.getChannelData(0);Ea(g,b,d);return k=>{var m=a.createBufferSource();m.buffer=f;var n=a.createGain();n.gain.value=.1*k;m.connect(n);n.connect(a.destination);m.start();m.stop(a.currentTime+e);m.onended=function(){n&&n.disconnect()}}};var Fa={o:[12,15,0,10,10,0,3,6],i:[5,56,0,10,10,0,3,3],j:[5,56,0,10,10,0,1,3],u:[5,14,0,10,10,0,3,3],a:[18,30,0,10,10,0,3,5],e:[14,50,0,10,10,0,3,15],w:[3,14,0,10,10,0,3,1],v:[2,20,0,20,10,0,3,3],z:[5,28,80,10,5,10,3,3],b:[4,0,0,10,0,0,1,2],d:[4,40,80,10,10,10,1,2],m:[4,20,0,10,10,0,3,2],n:[4,40,0,10,10,0,3,2],r:[3,10,20,30,8,1,3,3],l:[8,20,0,10,10,0,3,5],g:[2,10,26,15,5,2,2,1],f:[8,20,34,10,10,10,3,4,1],h:[22,26,32,30,10,30,1,10,1],s:[80,110,0,80,40,0,3,5,1],p:[4,10,20,5,10,10,1,2,1,1],t:[4,20,40,10,20,5,1,3,1,1],k:[20,80,0,10,10,0,1,3,1,1]};function Ea(a,b,e){for(var d=0,f=0;f<b.length;f++){var g=b.charAt(f),k=Fa[g];if(k){g=k[7];for(var m=e/15*k[6],n=0;3>n;n++){var p=k[n],u=50/e*p;if(p)for(var v=p=0,x=1-10*Math.PI/e*k[n+3],w=d,r=0,q=0;q<m;q++){var t=Math.random()-.5;k[8]||(r=120*Math.PI/e*q,t=.5-(r-Math.floor(r/(2*Math.PI))*Math.PI*2)/(2*Math.PI),r=0);t=t+2*Math.cos(2*Math.PI*u)*p*x-v*x*x;v=p;p=t;r=t=.75*r+t*g;t=t/128-1;a[w++]=a[w]/2+t;a[w++]=a[w]/2+t}}d+=3*m/4<<1;k[9]&&(d+=m&16777214)}else" "==g&&(d+=Math.floor(.2*e))}}let V=(a,b=30,e=30,d=1,f=1)=>{let g=[[a,b,e+9],[a,b-9,e],[a,b,e-9]],k=Ga(32*d,32*f);return(m,n,p)=>[{id:p(),N:k,ja:g,Z:2,T:0,ea:-1,C:[m,n,d,f]}]},Ja=a=>(b,e,d)=>[{id:d(),Z:3,T:2,ea:16776975,C:[b+a+(1-.9)/2,e+1-1,.9,1],W:[0,0,0,0],va:1,S:[0,0,0,0,0],U:2,H:[0,0],N:Ha,ja:Ia,Ga:1}],Ma=()=>(a,b,e)=>[{Z:1,N:Ka,ja:La,C:[a+0,b+1-2,1,2],ea:11145103,T:5,va:0,id:e(),S:[0,0,0,0,0],U:0,La:0,ba:0,H:[0,0],ia:.002,W:[0,0,0,0],orientation:0,Aa:0,ga:{wa:{},V:{}},L:{},aa:0,sa:[],$:[10,28]}],Na=(a,b)=>(e,d,f)=>{e=a(e,d,f);localStorage.getItem(b)?e=[]:(e[0].ab=b,e[0].id=b);return e},Oa=(a,b,e)=>{let d=e%2?[11,12]:[13,14];return(f,g,k)=>[{Z:9,N:Ga(32*a,32*b),ja:La,C:[f,g,a,b],ea:-1,T:0,va:0,id:k(),S:[0,0,0,0,0],U:0,La:0,ba:0,H:[0,0],ia:.003,W:[0,0,0,0],ga:{wa:{},V:{}},L:{},aa:0,sa:[],$:[...d,10],Ga:1,direction:e,home:[f,g]}]},Ra=(a,b,e)=>[{N:Pa,ja:Qa,Z:0,C:[a+.2,b+1-.8,.6,.8],T:4,ea:11145103,ib:215,va:1,orientation:1,Aa:0,id:e(),U:1,H:[0,0],S:[0,0,0,0,0],ia:.006,W:[0,0,0,0],Ga:1,ga:{wa:{},V:{}},L:{},aa:11,ra:12,sa:[],Ca:[],$:[27],fb:1}],Ua=(a,b)=>{var e=[60,80,70];let d=[[50,80,49],[50,71,40],[50,80,31],[50,80,21],[0,0,100]],f=Sa(32*a),g=b&&Ta(b,e);return(k,m,n)=>{let p=g&&g(k,m,n);return[{id:n(),N:f,ja:d,Z:8,T:0,ea:-1,C:[k,m,a,1],ia:0,W:[0,0,0,0],L:{[3]:p&&p[0]},aa:0,ra:3,ga:{wa:{},V:{}},S:[0,0,0,0,0],va:0,U:0,Ca:[],H:[0,0],Ua:1,$:[25,17,18,24]}]}},Xa=a=>{var b=[60,80,70];let e=a&&Ta(a,b);return(d,f,g)=>{let k=e&&e(d,f,g);return[{N:Va,Ua:1,ia:0,C:[d+0,f+1-.75,1,.75],W:[0,0,0,0],T:6,ea:0,va:0,L:{[1]:k&&k[0]},id:g(),ga:{wa:{},V:{}},Z:6,S:[0,0,0,0,0],aa:0,ra:1,U:0,ja:Wa,H:[0,0],Na:1,Da:0,Ca:[],$:[25,17,18,23,24]}]}},Za=a=>(b,e,d)=>[{Z:1,N:Ya,ja:La,C:[b+(1-.9)/2,e+1-.9,.9,.9],ea:11145103,T:5,va:1,id:d(),S:[0,0,0,0,0],U:1,La:0,ba:0,H:[0,0],ia:.002,W:[0,0,0,0],orientation:a,Aa:0,ga:{wa:{},V:{}},L:{[7]:void 0},aa:5,ra:7,sa:[],qb:1,$:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,18,20,21,24,25]}],$a=[1,2],ab=a=>(b,e,d)=>a.reduce((f,g)=>[...f,...g(b,e,d)],[]),db=()=>{let a=bb(),b={r:V(0),y:V(220),g:V(120),c:V(180),b:V(240),p:V(300),w:V(0,0,90),k:V(0,0,20),a:Ja(0),"^":a,m:Ma(),d:Oa(1,2,1)},e=[[cb(Object.assign({},b,{4:Ua(1,[28,27,12])}),"yyyyyyyyyyyyyyyyyyy                yy                yy                yy                yy                yy                yy                yy                yy                yy                yy           4     yy   yyyyyyyyyyyyy",[60,20,90]),cb(Object.assign({},b),"yyyyyyyyyyyyyyyyyyy                yy                yy                yy                yy                yy                yy                yy                yy                yy                y                 yyyyyyyyyyyyyyyyyyy",[60,20,80])],[cb(Object.assign({},b,{1:Xa([,,,13,,,]),2:Xa([13,,13,,13,,13,,13,,13,,14,,14,,14,,14,,14,,14,,]),3:ab([Za(0),a])}),"yyyyyyyyyyyyyyyyyyy                yy     1          yyyyy     yyyyyyyyyy        y       yy        y       yya       y       yyyyyyyyyyy       yy                 y                yy                yy                yy   yyyyyyyyyyyyyy",[30,20,60]),cb(Object.assign({},b,{1:Xa([,,14,,,,]),2:Ua(1,[13]),3:Ua(1,[15]),4:Ua(1,[12]),A:Ja(.1),P:Na(Ra,1),R:Za(1),F:Na(Oa(2,1,3),2)}),"yyyyyyyyyyyyyyyyyyy                yy  y          1  yy  y       y  P  yy  yyyyyyyyy3yyy2yy            a   yy  yyyy     yy   yyyyyF yyyy  y    y  R     yy^^y    yy4y     yyyyyy4  yy        a       yy     ^^^yyyyyy^^yy  yyyyyyyyyyyyyyy",[240,80,80])],[cb(Object.assign({},b,{Y:V(220,void 0,void 0,1,.6),1:Ua(2,[25]),2:Oa(2,1,0),3:Oa(2,1,2),4:Oa(1,4,1),5:Oa(1,4,3)}),"y   yyYYYYYYYYYyyyy5 5yy 5 5 5 5    y   yy           yy   y            yy   y y 4 4 4 41 yy   y            yy   yy           yy   yy           yy 4 YYYYYYYYYYY  yy       3 2      yy  2           3 yy       3 2      yyyyyyyyyyyyyyyyyyy",[30,20,60]),cb(Object.assign({},b,{1:Ua(3,[28,11,29,,,12]),R:Za(0)}),"y  yyyybbbbbbbbbbb     y           byy   y           byy   y           byy   y           by   dybbbbbbbbbbbbym              R yy1  ybbbbbbbb  bb                 bbb bbbbbbbbbbbb  bbb bb             bb               bbbbbbbbbbbbbbbbbbb",[30,20,60])]];return{hb:(d,f,g)=>e[f][d](d,f,g),ob:2,nb:3,wb:2,xb:3,ub:0,vb:1}},cb=(a,b,e)=>{let d=b.length/18|1;return(f,g,k)=>{let m={Ha:[],backgroundColor:e,C:[f,g,18,d],jb:fa,eb:da(18,d,()=>[]),xa:[]};b.split("").forEach((n,p)=>{(n=a[n])&&n(p%18,p/18|0,k).forEach(u=>W(m,u))});$a.forEach(n=>{if(n=localStorage.getItem(n)){let [p,u,v]=JSON.parse(n);p==f&&u==g&&W(m,v)}});return m}},bb=()=>(a,b,e)=>{e=e();{var d=[];let f=4*Math.random()|8;for(let g=0;g<=f;g++){let k=g/f-.5;d.push({J:0,I:[{B:1,D:32*(g+(2*Math.random()-1))/f-16-3*k,G:14},{B:0,ca:(Math.random()+2)/3,da:(Math.random()+2.5-Math.abs(k))/2},{B:2,angle:Math.PI*(Math.random()-.5)/9+k*Math.PI/9}]})}d={qa:32,pa:8,oa:[[[0,-12,4,0,-4,0,0,1]]],ta:d}}return[{id:e,N:d,ja:eb,Z:7,T:1,ea:-1,C:[a+0,b+1-.25,1,.25]}]},Ta=(a,b)=>{let e=[b,[0,0,25],[0,0,100]];return(d,f,g)=>[{Z:5,N:fb,ja:e,C:[d+(1-.42)/2,f+1-.27,.42,.27],T:3,ea:3855,va:1,id:g(),S:[0,0,0,0,0],U:.05,W:[0,0,0,0],H:[0,0],cb:.4,orientation:0,Aa:0,pb:[...a]}]};let ib=(a,b,e,d,f,g)=>{if(g){gb(a,b);let k=b.timeRemaining-f;b.timeRemaining=f;R(b.C,b.H,hb(k),b.C)}b.H[d]+=e;[...b.ma,...b.la].forEach(k=>!d&&ib(a,k,e,d,f,1));g&&jb(a,b)},kb=a=>{if(a.W){let b=a.timeRemaining;b?(R(a.C,a.H,([e],[d])=>e+Math.min(0,d*b)-1E-7,a.W),R(a.C,a.H,([,e],[d])=>e+Math.abs(d*b)+2E-7,a.W,2)):a.W=[...a.C]}},X=(a,b,e)=>{a&&b&&a.H&&b.H&&(ba(a.ma,b),ba(a.la,b),e?(a.la.push(b),b.X=a):b.X==a&&(b.X=void 0))},Y=(a,b)=>(a.U||b)&&[...a.la,...a.ma].reduce((e,d)=>e+Y(d),a.U)||0,hb=a=>([b],[e])=>b+e*a,lb=(a,b,e)=>{if(b.H&&b.timeRemaining>e){gb(a,b);let d=b.timeRemaining-e;b.timeRemaining=e;R(b.C,b.H,hb(d),b.C);jb(a,b)}},mb=(a,b,e,d,f,g)=>{let k=oa[b],m=f();!a.Ba[k]&&m&&(null!=a.N.ha[k]?a.Ba[k]={resolve:n=>{f()==m&&(g(m,n),Z(a,b,e))},startTime:d}:(g(m,d),Z(a,b,e)))},Z=(a,b,e,d)=>{d?a.Ca.unshift(b):(b=e[b])&&b(a.U||1)},ob=(a,b,e,d)=>{let f=new Set;nb(a,b,g=>g.forEach(k=>{!f.has(k.id)&&va(d&&k.W||k.C,b)&&(e(k),f.add(k.id))}))},nb=(a,b,e)=>{ca(b,a.C,(d,f)=>{e(a.eb[d][f],d,f)})},W=(a,b,e)=>{e&&R(e,b.C,([d],[f])=>f+d,b.C);a.Ha.push(b);b.H&&a.xa.push(b);jb(a,b);e&&[...b.la,...b.ma].forEach(d=>W(a,d,e))},jb=(a,b)=>{b.za||(kb(b),nb(a,b.W||b.C,e=>e.push(b)))},pb=(a,b,e)=>{ba(a.Ha,b);(b.H||b.N)&&ba(a.xa,b);gb(a,b);e&&[...b.la,...b.ma].forEach(d=>pb(a,d,1))},gb=(a,b)=>{nb(a,b.W||b.C,e=>{ba(e,b)})};let rb=(a,b,e)=>{let [d,f]=b.Xa,g=[d-0,f-0,0,0],k=[0,0,...b.size];ca(g,k,(m,n)=>{var p=d==m&&f==n;p=qb(a,b,b.Ta[m][n],p?b.kb:{},p&&e);let [u,v]=b.size;p.forEach((x,w)=>{let r=ta[w],q=m+r[0],t=n+r[1];if(0<=q&&0<=t&&q<u&&t<v){let y=b.Ta[q][t];x.forEach(C=>{let z=1;0==C.Z&&(b.Xa=[q,t],z=0);let H=R([...r,...y.C],C.C,([F,,I],[N,S])=>0<F?1-S+z-N:0>F?I-1-z-N:0);W(y,C,H)})}})});b.ya+=19},sb=(a,b)=>{for(;a;)if(a=a.X,a==b)return 1},tb=(a,b)=>(sb(a,b)||0)-(sb(b,a)||0)||b.C[1]-a.C[1],qb=(a,b,e,d,f)=>{e.xa.sort(tb);let g=b.ya;for(var k of e.xa)ub(k,b,e,d);let m=19;for(;;){let r=m,q,t,y;e.xa.forEach(A=>{lb(e,A,m);A.H&&!A.za&&ob(e,A.W,D=>{if(D!=A&&(D!=q||A!=t)){lb(e,D,m);var O=R(A.H,D.H||[0,0],([B],[E])=>B-E);let [T,P]=R([...O,...A.C],D.C,([B,E,L],[Q,M])=>{if(0<B)return(Q-(E+L))/B;if(0>B)return(E-(Q+M))/-B});if(null!=T||null!=P){let B,E;(null==P||T>=P)&&0<=T?(B=T,E=0<O[0]?2:0):(null==T||P>T)&&0<=P&&(B=P,E=0<O[1]?3:1);O=A.ea>>4*D.T+E&D.ea>>4*A.T+(E+2)%4&1;if(null!=B&&B<=r&&O){var J=hb(B);O=R(A.C,A.H,J,[...A.C]);J=R(D.C,D.H||[0,0],J,[...D.C]);ua(O,J)[(E+1)%2]&&(r=B,q=A,t=D,y=E)}}}},1)});if(!q)break;m-=r;gb(e,q);gb(e,t);b=t;q.ua!=t&&(q.ua=void 0);t.ua!=q&&(t.ua=void 0);var n=q.S[(y+2)%4]<g&&b.S&&b.S[y]<g;let C=q.H,z=b.H||[0,0];d=y%2;k=(y+2)%4;var p=(d+1)%2,u=hb(r);R(q.C,C,u,q.C);R(t.C,z,u,t.C);u=Y(q);let H=Y(b);var v;if(q.Ja&&b.Ja)var x=v=0;else v=q.Ja,x=b.Ja;v=H&&!v?u||1:0;x=u&&!x?H||1:0;v||x||(v=x=1);q.S[y]=g+m;let F=C[d]-z[d];p&&q.X!=b.X&&(x&&(0>F&&0==y||0<F&&2==y||q.X==t)&&X(q.X,q),v&&(0>F&&2==y||0<F&&0==y||b.X==q)&&X(b.X,b));p=vb(q,t,g+r);let I=vb(t,q,g+r),N=Math.max(q.cb||.1,b.cb||.1),S=(z[d]*x+C[d]*v)/(v+x);p&&ib(e,q,(n?S-x*N*F/(v+x):0<C[d]&&2>y||0>C[d]&&1<y?C[d]:0)-q.H[d],d,m);I&&(n=n?S+v*N*F/(v+x):0<z[d]&&1<y||0>z[d]&&2>y?z[d]:0,b.H&&(b.S[k]=g+m,ib(e,b,n-b.H[d],d,m)));p&&I&&(3==y&&u&&x&&X(t,q,1),1==y&&H&&v&&X(q,t,1));b.timeRemaining=q.timeRemaining=m;jb(e,q);jb(e,t)}e.Ha.sort((r,q)=>q.T-r.T);a.fillStyle=ja(e.backgroundColor);a.fillRect(0,0,e.C[2],e.C[3]);let w=[[],[],[],[]];e.Ha.forEach(r=>{r.S&&r.S[3]+40<g&&!r.Fa&&(r.Fa=3);r.ua&&(r.S[4]=g+19,X(r.ua,r,1));lb(e,r,0);var q=R(r.C,e.C,([t,y],[C,z])=>C+Math.floor((t+y/2)/z));if(!r.X&&!aa(q,e.C)){if(!r.za){let [t,y]=e.C,[C,z]=q,H=C-t,F=z-y;q=ta.findIndex(([I,N])=>I==H&&N==F);0<=q&&w[q].push(r)}pb(e,r,1)}if(f){a.save();let [t,y,C]=r.C;a.translate(t+C/2,y);wb(a,r,g+19);a.restore()}});return w},wb=(a,b,e,d=1,f=1)=>{let [,,g,k]=b.C;if(b.N){if(b.Ia!=b.Fa){var m=b.N.ha&&b.N.ha[b.Ia];b.lb=m&&m.O||0;b.Ia=b.Fa;b.gb=e}m=1;null!=b.orientation&&(m=2*Math.min(1,(e-b.Aa)/150)-1,m=0<m?Math.max(.2,m):Math.min(-.2,m),m=b.orientation?m:-m);let u=g/(b.N.qa*d),v=k/(b.N.pa*f);a.save();a.scale(u*m,v);if(b.Ia&&(d=b.N.ha&&b.N.ha[b.Ia])){var n=e-b.gb;var p=b.lb;p<d.O&&(n-=p);0<=n?(p=Math.floor(n/d.O),d.count?(f=d.M.length*d.O,Math.floor(p/d.M.length)>=d.count&&(p=d.M.length-1),n=Math.min(n-p*d.O,f)):(n-=p*d.O,p%=d.M.length),n/=d.O,p=d.M[p]):(n=1-n/p,p=d.M[d.M.length-1])}b.Wa!=p&&(b.bb=b.Wa,b.Wa=p);let x=[];b.Ba&&ea(b.Ba,(w,r)=>{r=b.N.ha[r];w=(e-w.startTime)/r.O;let q,t;w<r.M.length?(q=w|0,w-=q,t=q-1):(q=r.M.length-1,w=r.M.length-w+1,t=-1);x.push({Oa:r.M[q],progress:w});0<=t&&x.push({Oa:r.M[t],progress:1-w})});null!=p&&x.unshift({Oa:p,progress:n});null!=b.bb&&1>n&&x.unshift({Oa:b.bb,progress:1-n});la(a,b.N,b.ja,(w,r)=>{(r=b.L&&b.L[r.id])&&wb(w,r,e,u,v)},x);a.restore()}b.Ka&&b.$a>e-3E3&&(n=b.Ka.slice(-1).map(pa).join(""),d=a.measureText(n).width,p=d+.4,d=-d/2-.2,f=1-(e-b.$a)/3E3,a.globalAlpha=f*f,a.beginPath(),a.moveTo(d+.2,-1.3),a.arcTo(d+p,-1.3,d+p,-1.1,.2),a.arcTo(d+p,-.4,d+p-.2,-.4,.2),a.lineTo(.1,-.4),a.lineTo(0,-.2),a.lineTo(-.1,-.4),a.arcTo(d,-.4,d,-1.1,.2),a.arcTo(d,-1.3,d+.2,-1.3,.2),a.fillStyle="#fff",a.fill(),a.strokeStyle=a.fillStyle="#333",a.stroke(),a.globalAlpha=f,a.fillText(n,0,-.2-.4),a.globalAlpha=1)},ub=(a,b,e,d)=>{gb(e,a);let f=b.ya;var g=a.L&&a.L[a.ra];g=g&&g.pb;if(a.Ca&&a.Ca.length&&(f/1E3|0)<((f+19)/1E3|0)){let z=a.Ca.pop();if(null!=z){var k=G[z].utterance;let [,,H,F]=e.C,I=da(H,F,()=>0),N=[[a.C[0]|0,a.C[1]|0]];for(;N.length;){let [A,D]=N.pop();if(0<=A&&0<=D&&A<H&&D<F&&!I[A][D]){let O=[A,D,1,1];var m=e.eb[A][D].find(J=>.8<va(J.C,O)&&(0==J.T||2==J.T));m?I[A][D]=m.id:(I[A][D]=-1,ta.forEach(([J,T])=>{N.push([A+J,D+T])}))}}let S;e.xa.forEach(A=>{let [D,O]=A.C,J=I[D|0][O|0];if(0>J||J==A.id)S=S||0==A.Z,A.sa&&A!=a&&(A.sa.push(z),A.rb=f),A.$&&A.fb&&0>A.$.indexOf(z)&&(A.$.push(z),A.Za=z,A.Ya=f)});S&&(a.Ka=a.Ka||[],a.Ka.push(z),k(a.U||1,1),a.$a=f)}}a.Ba=a.Ba||{};ea(a.Ba,(z,H)=>{let F=a.N.ha[H],I=z.startTime+F.O*F.M.length;I<f+19&&(I>=f&&z.resolve(f),I+F.O<f+19&&delete a.Ba[H])});a.ua=void 0;a.H&&(a.timeRemaining=19,R(a.H,e.jb,([z],[H])=>z+H*a.va*19,a.H),a.H=a.H.map(z=>Math.min(Math.max(z,-.015),.015)));k=f-a.S[3];var n=f-a.S[4],p=Math.min(k,n);m=[0,0];var u=a.orientation;let v;let x;if(a.H){a.ma&&a.ma.forEach(z=>X(z.X,z));if(a.X){m=a.X.H||m;var w=a.X;u=null!=w.orientation&&w.Aa>a.Aa?w.orientation:u}a.ma=a.la||[];a.la=[]}let r=u;if(a.ga&&!a.za){var q=a.ga;let z;var t;switch(a.Z){case 1:case 9:if(a.La<f){var y=0;for(u=a.ba;!y;)if(w=u,u=w+1,w=a.sa&&a.sa.pop()||(g&&w<g.length?g[w]:10),q.V={},0<=a.$.indexOf(w))switch(w){case 13:case 14:case 11:case 12:y=(C||1)/a.ia;q.V[w]=f;break;case 10:y=1E3*(C||1);break;case 17:case 18:q.V[w]=f;y=200*(C||1);break;case 28:b.Ta.forEach((B,E)=>B.forEach((L,Q)=>L.xa.forEach(M=>{if(M.ab){let Ba=Object.assign({},M,{C:0==M.Z?[a.C[0],a.C[1],M.C[2],M.C[3]]:M.C,ma:[],la:[],X:void 0,ua:void 0,L:{},inputs:{V:{},wa:{}},Ya:0});localStorage.setItem(M.ab,JSON.stringify([E,Q,Ba]))}})));localStorage.setItem("w",f);b.sb=f;break;default:var C=10*(C||0)+w}else C=0;a.La=f+y;a.ba=u}break;case 6:q.V[25]=f;break;case 8:q.V[25]=Y(a,1)|0||a.ba<g.length?f:0;break;case 0:K(a,27,f)&&(a.Va=!a.Va)}u=100>=p;w=K(a,13,f);let H=K(a,14,f);q=Y(a)||1;let F=q<2*a.U,I=a.qb?a.ia:a.ia/q;19>k&&(t=1);b=K(a,11,f);C=K(a,12,f);z=K(a,15,f);v=K(a,20,f);let N=K(a,21,f);p=K(a,22,f);let S=K(a,23,f),A=K(a,24,f),D=K(a,25,f);x=K(a,26,f);q=K(a,17,f);y=K(a,18,f);if(a.Ga||u)if(a.H[0]=(H-w)*I+m[0],w){if(u||!a.U)t=2,sa(a,13,f)&&Z(a,13,d);r=0}else H&&(r=1,u||!a.U)&&(t=2,sa(a,14,f)&&Z(a,14,d));a.L[a.ra]&&(q?(t=9,sa(a,17,f,200)&&0<a.ba&&(a.ba--,Z(a,17,d))):y?(t=9,sa(a,18,f,200)&&a.ba<g.length&&(a.ba++,Z(a,18,d))):x?(t=9,a.Ea||(a.Da||(a.Da=f),Z(a,26,d)),a.Ea=1):D&&(t=9,a.Na||(a.Da=f,a.ba=a.ba%g.length,Z(a,25,d)),a.Na=1));x||(a.Ea=0);D||(a.Na=0);let [O,J,T]=a.C;z&&u&&F&&(a.H[1]=-.014,a.S[3]=0,a.S[4]=0,Z(a,15,d),k=20);b&&(19>=n||!a.U)&&(a.H[1]=a.U?-.011:-a.ia,a.S[4]=0,k=20);a.U||(C?a.H[1]=a.ia:b||(a.H[1]=0));N&&a.L&&mb(a,21,d,f,()=>a.L[a.aa],B=>{B.H=[0,0];delete a.L[a.aa];R(a.C,B.C,([E,L],[,Q])=>E+(L-Q)/2,B.C);W(e,B)});S&&a.L&&mb(a,23,d,f,()=>!a.L[a.ra]&&a.L[a.aa],B=>{a.L[a.ra]=B;delete a.L[a.aa]});A&&a.L&&(n=a.L[a.ra])&&(u=Y(n),n.H=[3E-4*(r-.5)/u,-3E-4/u],delete a.L[a.ra],R(a.C,n.C,([B,E],[,L])=>B+(E-L)/2,n.C),n.orientation=a.orientation,W(e,n),Z(a,24,d));p&&mb(a,22,d,f,()=>a.ma[0]||a.la[0]||a.L&&a.L[a.aa],B=>{let E=Y(B);B.H=[.02*(2*r-1)/E,-.02/E];a.L[a.aa]==B&&(delete a.L[a.aa],R(a.C,B.C,([L,Q],[,M])=>L+(Q-M)/2,B.C),B.orientation=a.orientation,W(e,B));X(a,B)});a.Ja=19<k&&a.U;let P;if(!C&&0<a.H[1]&&(19<k||b)){let B=O+T*r;let E=0;ob(e,[B-.15,J-.15,.3,.3],L=>{if(1<<L.T&a.ib){E++;let [Q,M,Ba]=L.C;(.075>Math.abs(Q+(r+1)%2*Ba-B)||6==L.T)&&.15>Math.abs(M-J)&&(P=L)}});if(1==E&&P){let [L,Q,M]=P.C;a.H=[(6==P.T?0:L+(r+1)%2*(M+.02)-B-.01)/19+m[0],(Q-J-.01)/19];a.ua=P;t=4}}a.Fa=t}else a.H&&(19>=k||a.Ga)&&0<a.H[1]&&(a.H[0]=m[0]);a.orientation!=r&&null!=r&&(a.orientation=r,a.Aa=f);!a.Na&&!a.Ea||y||q||(t=f-a.Da,(t/1E3|0)<((t+19)/1E3|0)&&(t=a.ba||0,t<g.length?(a.Ea?(g[t]=a.sa[0],a.sa=[]):Z(a,g[t],d,f),a.ba=t+1):a.Ua&&!a.Ea?a.ba=0:a.Da=0));ob(e,a.C,z=>{v&&(mb(a,20,d,f,()=>3==z.T&&a.L&&!a.L[a.aa],()=>{pb(e,z);a.L[a.aa]=z}),v=0)});a.za&&(a.Fa=10);jb(e,a)},vb=(a,b,e)=>7==b.Z?(a.H=[0,-.015],a.za=e,0):1,xb=(a,b,e,d)=>{let f=99;let g=()=>f++;let k,m,n;let p=da(b,e,(v,x)=>{let w=d(v,x,g),r=w.xa.find(q=>0==q.Z);r&&(k=r,m=v,n=x);return w}),u={[15]:U(a,.3,.2,"triangle",500,700,400,"sine",60),[22]:U(a,.2,.2,"triangle",500,2E3,599),[10]:Aa(a,350,440),[17]:U(a,.2,.1,"sine",1440,2999,999,"sawtooth",200),[18]:U(a,.2,.1,"sine",2999,1440,2E3,"triangle",200),[13]:Da(a),[14]:Da(a),[24]:U(a,.2,.2,"triangle",300,2E3,599),[21]:U(a,.2,.2,"triangle",200,2E3,599),[20]:U(a,.2,.2,"triangle",700,2E3,599)};for(let v=0;10>v;v++)u[v]=Aa(a,ha[v%ha.length],ia[(v/ha.length|0)%ia.length]);ra(a);a=parseInt(localStorage.getItem("w")||0);return{Xa:[m,n],size:[b,e],Ta:p,tb:f,ya:a,Ma:k,kb:u}},Ga=(a,b)=>({qa:a,pa:b,oa:[[[-a/2,0,a,b,1,4],[-a/2,0,a-2,b-2,0,4],[2-a/2,2,a-2,b-2,2,4],[2-a/2,2,a-4,b-4,1,4]]],ta:[{J:0}]}),Ia=[[30,30,60],[30,30,50],[30,30,40]],Ha={qa:16,pa:16,oa:[[[-7.5,-1.5,15,3,1],[-8,-1,1,2,0],[-7,-2,14,1,0],[7,-1,1,2,2],[-7,1,14,1,2]]],ta:[{id:0,I:[{B:1,D:0,G:2}],fa:[{J:0,I:[{B:1,D:0,G:4}]},{J:0,I:[{B:1,D:0,G:8}]},{J:0,I:[{B:1,D:-6,G:6},{B:0,ca:1,da:-1},{B:2,angle:-Math.PI/2}]},{J:0,I:[{B:1,D:6,G:6},{B:0,ca:1,da:-1},{B:2,angle:-Math.PI/2}]},{J:0},{J:0,I:[{B:1,D:0,G:12}]}]}]},Ka={qa:32,pa:48,oa:[[[-16,-16,32,32,1,4],[-16,-16,30,30,0,4],[-14,-14,30,30,2,4],[-14,-14,28,28,1,4]],[]],ta:[{J:0,I:[{B:1,D:0,G:16}]}]},Qa=[[40,5,60],[40,5,40],[120,40,30],[40,5,10],[0,100,40]],Pa={qa:22,pa:30,oa:[[[0,0,20,26,0],[2,6,16,8,1],[3,0,14,4,3],[3,0,3,4,4],[3,16,2,2,1],[9,16,2,2,1],[15,16,2,2,1],[3,21,2,2,1],[9,21,2,2,1],[15,21,2,2,1]],[[-8,0,8,26,1]],[[-2,0,4,2,3],[-3,2,8,2,3]],[[-2,0,4,8,3]],[[-.5,-1,1,2,3],[-1,-.5,2,1,3]],[[-5,-4,2,4,1],[15,-4,2,4,1],[-5,-4,22,2,1]]],ta:[{id:0,I:[{B:1,D:-6,G:0}],fa:[{id:3,J:2,I:[{B:1,D:0,G:26}]},{id:4,J:2,I:[{B:1,D:14,G:26}]},{id:7,fa:[{id:1,J:0,mb:[{id:6,J:3,I:[{B:1,D:18,G:8}]},{id:10,J:5}],fa:[{id:8,J:4,I:[{B:1,D:7,G:10}]},{id:9,J:4,I:[{B:1,D:14,G:10}]},{id:12,I:[{B:1,D:10.5,G:6}]}]},{id:2,J:1,fa:[{id:5,J:3,I:[{B:1,D:-5,G:8}],fa:[{id:11,I:[{B:1,D:0,G:6}]}]}]}]}]}],Sa:[{[0]:[{B:1,D:-6,G:0},{B:2,angle:Math.PI/20}],[1]:[{B:0,ca:1.2,da:1}],[2]:[{B:0,ca:.6,da:1}],[3]:[{B:1,D:0,G:-6},{B:2,angle:Math.PI/5}],[5]:[{B:2,angle:-Math.PI/3}],[6]:[{B:2,angle:Math.PI/3}],[10]:[{B:0,ca:.8,da:1},{B:1,D:3,G:0}]},{[0]:[{B:1,D:6,G:0},{B:2,angle:-Math.PI/20}],[1]:[{B:0,ca:.6,da:1}],[2]:[{B:0,ca:1.2,da:1}],[3]:[{B:1,D:-4,G:0}],[4]:[{B:1,D:-4,G:-6},{B:2,angle:Math.PI/5}],[5]:[{B:2,angle:Math.PI/3}],[6]:[{B:2,angle:-Math.PI/3}],[10]:[{B:0,ca:.7,da:1}]},{[3]:[{B:2,angle:Math.PI/8}],[4]:[{B:2,angle:-Math.PI/8}],[5]:[{B:2,angle:2*Math.PI/3}],[6]:[{B:2,angle:2*-Math.PI/3}]},{[7]:[{B:1,D:0,G:-2},{B:0,ca:.95,da:1.1}]},{},{[0]:[{B:1,D:-6,G:0},{B:2,angle:-Math.PI/10}],[5]:[{B:2,angle:Math.PI/10}],[6]:[{B:2,angle:-Math.PI/3}]},{[5]:[{B:2,angle:-Math.PI/2}],[11]:[{B:2,angle:Math.PI/2}]},{[7]:[,{B:0,ca:1.1,da:.8},{B:1,D:0,G:10}],[5]:[{B:2,angle:-Math.PI/4}]},{[0]:[,{B:2,angle:-Math.PI/4,Pa:3,Qa:26}],[7]:[{B:0,ca:1.2,da:.8},{B:1,D:0,G:10}],[5]:[{B:2,angle:3*Math.PI/4}],[4]:[{B:2,angle:Math.PI/4}]},{[0]:[{B:2,angle:Math.PI/4,Pa:10,Qa:26}],[7]:[{B:0,ca:.9,da:1.2},{B:1,D:0,G:-4}],[5]:[{B:2,angle:3*Math.PI/2}],[4]:[{B:2,angle:-Math.PI/4}]},{[5]:[{B:2,angle:-Math.PI/3}]},{[5]:[{B:2,angle:3*-Math.PI/4},{B:1,D:0,G:4}]}],ha:{[2]:{O:300,M:[0,1]},[3]:{O:400,M:[2],count:1},[1]:{O:1E3,M:[3,4]},[4]:{O:100,M:[5],count:1},[5]:{O:300,M:[6]},[6]:{O:200,M:[7]},[7]:{O:180,M:[8,9]},[8]:{O:200,M:[10]},[9]:{O:300,M:[11],count:1},[10]:{O:100,M:[2]}}},Sa=a=>{let b=[0,0,4,4],e=[4,4],d=[];let f=a/16;let g=(a-4*f)/(f+1);let k=0;for(;f--;)k+=g,d.push([k,-2,4,2,2]),k+=4;return{qa:a,pa:32,oa:[[...d,[0,0,a,26,1,b],[0,0,a-2,24,0,b],[2,1,a-2,25,2,b],[2,1,a-4,23,1,b],[9,6,14,9,3],[12,10,1,1,4],[18,10,1,1,4]],[[0,0,a,6,1,e],[0,0,a-2,6,0,e],[2,2,a-2,4,2,e],[2,2,a-4,3,1,e]]],ta:[{id:0,J:0,I:[{B:1,D:-a/2,G:6}]},{id:1,J:1,I:[{B:1,D:-a/2,G:-2}]},{id:3,I:[{B:1,D:16-a/2,G:12}]}],Sa:[{[1]:[{B:1,D:0,G:2}]}],ha:{[9]:{O:100,M:[0],count:1}}}},Wa=[[210,30,70],[210,20,60],[210,30,50],[0,0,30],[210,30,30],[0,0,100]],Va={qa:32,pa:24,oa:[[[-16,-12,32,24,2,5],[-15,-11,30,22,1,4],[1.5,-6.5,12,12,2,6],[2.5,-5.5,12,12,0,6],[2,-6,12,12,3,6],[-13.5,-6,13,8,4],[-5,-3,2,2,5,1],[-11,-3,2,2,5,1]]],ta:[{id:0,J:0,I:[{B:1,D:0,G:12}]},{id:1,I:[{B:1,D:-7.5,G:5.5}]}]},La=[[0,40,50],[0,40,40],[0,40,20],[0,0,100]],Ya={qa:32,pa:32,oa:[[[-12,-28,32,16,0],[-12,-28,16,28,0]],[[-9,-10,18,12,1],[-7,-8,14,8,2]],[[-1,-.5,2,1,3],[-.5,-1,1,2,3]],[[-2,-3,4,6,2]],[[-2,0,4,6,2]]],ta:[{id:0,I:[{B:1,D:-10,G:0}],fa:[{id:3,J:4,I:[{B:1,D:-4,G:26}]},{id:4,J:4,I:[{B:1,D:4,G:26}]},{id:1,J:0,I:[{B:1,D:4,G:28}],fa:[{id:5,J:3,I:[{B:1,D:18,G:-10}]},{id:6,J:3,I:[{B:1,D:8,G:-10}],fa:[{id:8,I:[{B:1,D:0,G:5}]}]},{id:2,J:1,I:[{B:1,D:15,G:-12}],fa:[{J:2,I:[{B:1,D:3,G:-4}]},{J:2,I:[{B:1,D:-3,G:-4}]},{id:7,I:[{B:1,D:0,G:-9}]}]}]}]}],Sa:[{[1]:[{B:2,angle:-Math.PI/20}],[3]:[{B:1,D:0,G:-3}],[2]:[{B:2,angle:Math.PI/20}]},{[1]:[{B:2,angle:Math.PI/20}],[4]:[{B:1,D:0,G:-3}],[2]:[{B:2,angle:-Math.PI/20}]}],ha:{[2]:{O:300,M:[0,1]}}},eb=[[0,0,100],[0,0,40]],fb={qa:18,pa:12,oa:[[[-9,-6,18,12,1,[2,2]],[-8,-5,16,8,0],[-6,-3,12,4,1,2]],[[-1,-1,2,2,2,1]]],ta:[{id:0,J:0,I:[{B:1,D:0,G:6}],fa:[{J:1,I:[{B:1,D:-4,G:-1}]},{J:1,I:[{B:1,D:4,G:-1}]}]}]};onload=()=>{let a=new AudioContext,{hb:b,nb:e,ob:d}=db();let f;f=xb(a,d,e,b);let g,k,m,n;let p=[c,o,h],u=()=>{k=Math.floor(innerWidth/innerHeight<17.6/12.6?innerWidth/17.6:innerHeight/12.6);m=17.6*k;n=12.6*k;c.width=m;c.height=n;g=c.getContext("2d");g.textAlign="center";g.font="0.5px fantasy";g.lineWidth=1/k;p.forEach(q=>q.setAttribute("style",`width:${m}px;height:${n}px`))};onresize=u;u();let v={};onkeydown=q=>{a.resume();v[q.keyCode]=v[q.keyCode]?v[q.keyCode]:f.ya};onkeyup=q=>{v[q.keyCode]=0};let x,w=0;let r=q=>{let t=Math.min((q||0)-(x||0),38)+w;var y=f.Ma.ga;y.V={};for(let C in na){let z=na[C];y.V[z]=Math.max(y.V[z]||0,v[C]||0)}for(;!(19>t);){t-=19;if(y=19>t)g.clearRect(0,0,m,n),g.save(),g.scale(k,k),g.translate(-.2,-.2);rb(g,f,y);y&&g.restore()}w=t;f.Ma.za&&K(f.Ma,15,f.ya)&&(f=xb(a,d,e,b));yb(f.Ma,f.ya);requestAnimationFrame(r);x=q};r()};let yb=(a,b)=>{o.style.opacity=a.za?"1":"0";a.Va?(h.style.opacity="1",h.innerHTML=G.map((e,d)=>0<=a.$.indexOf(d)&&e.K?`<b>${e.Ra||e.K&&String.fromCharCode(e.K[0])}${e.na?"+hold":""}</b>) ${pa(d)}<br>`:"").join("")):h.style.opacity="0";a.Ya>b-3E3&&G[a.Za].K?(l.innerHTML=`New ability<br><i>${pa(a.Za).toUpperCase()}`,l.style.opacity="1"):l.style.opacity="0"};</script>