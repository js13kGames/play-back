<style>body{margin:0;padding:0;background:#000}#c,#o,#s{position:absolute;top:0;left:0;bottom:0;right:0;margin:auto;box-sizing:border-box}#o,#s{color:#fff;background:rgba(0,0,0,.5);opacity:0;transition:opacity .5s}#o,#s{text-align:center;font:9vh fantasy;padding-top:40vh}</style><canvas id="c"></canvas><div id="o"><b>Space to Retry</b></div><div id="s"><b>Game Saved</b></div><script>let aa=(a,b)=>a.reduce((e,d,f)=>e&&d==b[f],!0),ba=(a,b)=>{b=a.indexOf(b);0<=b&&a.splice(b,1)},da=(a,b,e)=>{a=[0,0,a,b];let d=[];ca(a,a,(f,g)=>{g||d.push([]);d[f].push(e(f,g))});return d},ea=(a,b)=>{for(let e in a)b(a[e],e)};let fa=[0,7E-5],ha=[1209,1336,1477],ia=[697,770,852,941];let ja=a=>{let [b,e,d]=a;return`hsl(${b},${e}%,${d}%)`},la=(a,b,e,d,f)=>{ka(a,b,e,b.ua,d,f)},ka=(a,b,e,d,f,g)=>{d&&d.forEach(k=>{a.save();ma(a,k.I,1);g.forEach(l=>ma(a,b.Va[l.Sa][k.id],l.progress));ka(a,b,e,k.ob,f,g);null!=k.J&&b.pa[k.J].forEach(l=>{a.beginPath();var m;if(8>l.length){let [n,t,u,w,v,q,p]=l,r,x,A;q&&(q.length?[m,r,x,A]=q:m=r=x=A=q);m=m||0;r=r||0;x=x||0;A=A||0;a.moveTo(n+m,t);a.arcTo(n+u,t,n+u,t+r,r);a.arcTo(n+u,t+w,n+u-x,t+w,x);a.arcTo(n,t+w,n,t+A,A);a.arcTo(n,t,n+m,t,m);l=v;m=p}else{let [n,t,u,w,v,q,p,r]=l;a.moveTo(n,t);a.lineTo(u,w);a.lineTo(v,q);a.lineTo(n,t);l=p;m=r}a.fillStyle=ja(e[l]);a.fill();null!=m&&(a.strokeStyle=ja(e[m]),a.lineWidth=1,a.stroke())});ka(a,b,e,k.ga,f,g);f(a,k);a.restore()})},ma=(a,b,e)=>{b&&b.forEach(d=>{switch(d.B){case 0:a.scale(1-(1-d.da)*e,1-(1-d.ea)*e);break;case 1:a.translate(d.D*e,d.G*e);break;case 2:a.translate(d.Ta||0,d.Ua||0);a.rotate(d.K*e);a.translate(-d.Ta||0,-d.Ua||0);break;case 3:a.globalAlpha=d.opacity*e}})};let F=[{M:[48]},{M:[49]},{M:[50]},{M:[51]},{M:[52]},{M:[53]},{M:[54]},{M:[55]},{M:[56]},{M:[57]},{},{M:[87,38],V:"up",xa:1},{M:[83,40],V:"down",xa:1},{M:[65,37],V:"left",ma:2,xa:1},{M:[68,39],V:"right",ma:2,xa:1},{M:[74,32],V:"jump"},{V:"say"},{M:[188],$a:">",V:"rewind",ma:9,xa:1},{M:[190],$a:"<",V:"fast forward",ma:9,xa:1},{V:"stop"},{M:[80],V:"pick up",ma:6},{M:[76],V:"drop",ma:8},{M:[84],V:"throw",ma:7},{M:[73],V:"insert",ma:5},{M:[75],V:"eject"},{M:[77],V:"play",ma:9,xa:1},{M:[82],V:"record",xa:1},{M:[72],V:"help"},{V:"save"},{V:"shoot"}],na={},oa={},ra=a=>{F.forEach((b,e)=>{b.M&&b.M.forEach(d=>na[d]=e);oa[e]=b.ma;{let d=pa(e);b.sb=d&&qa(a,d)}})},pa=a=>{a=F[a];return a.V||a.$a||a.M&&String.fromCharCode(a.M[0])};let J=(a,b,e)=>{let d=a.ha,f=F[b].xa,g=d.X[b],k=d.ya[b]||0;return(!a.ka||0<=a.ka.indexOf(b))&&g&&(f||k<g)?(d.ya[b]=e,1):0},sa=(a,b,e,d)=>{let f=a.ha;if(!a.ka||0<=a.ka.indexOf(b))if(!d&&(a=a.O.ia[oa[b]])&&(d=a.S),d)return b=e-f.X[b],(b/d|0)!=((b+19)/d|0)};let ta=[[-1,0],[0,-1],[1,0],[0,1]];let ua=(a,b)=>Q(a,b,([e,d],[f,g])=>{d=e+d;g=f+g;return e>=f&&e<g?g-e:f>=e&&f<d?d-f:0}),va=(a,b)=>{a=ua(a,b);return a[0]*a[1]},wa=(a,b)=>Q(a,b,([e,d],[,f])=>[Math.max(0,Math.floor(e)),Math.min(Math.floor(e+d),f-1)]),ca=(a,b,e)=>{if(a){let [[d,f],[g,k]]=wa(a,b);for(a=d;a<=f;a++)for(b=g;b<=k;b++)e(a,b)}};let xa=(a,b)=>0==b%2,ya=(a,b)=>0<b%2;let Q=(a,b,e,d=[],f=0)=>{d[f]=e(a.filter(xa),b.filter(xa));d[f+1]=e(a.filter(ya),b.filter(ya));return d};let Ba=(a,b,e)=>(d,f,g=1)=>{f=a.currentTime+.3*g;let k=a.createOscillator(),l=a.createOscillator();k.frequency.value=b/(g*d);l.frequency.value=e/(g*d);let m=a.createGain();m.gain.value=d/9;d=a.createBiquadFilter();d.type="lowpass";d.frequency.value=8E3/g;k.connect(m);l.connect(m);m.connect(d);d.connect(a.destination);k.start();l.start();k.stop(f);l.stop(f);k.onended=()=>{[m].map(Aa)}};let T=(a,b,e,d,f,g,k,l,m)=>(n,t,u=1)=>{t=a.currentTime;let w=a.createOscillator();w.frequency.setValueAtTime(f/u,t);w.frequency.linearRampToValueAtTime(g/u,t+b*u);w.type=d;let v=a.createGain();Ca(v,t,e*n,.05*n,0*u,.2*b*u,b*u);let q;l&&(n=a.createOscillator(),n.frequency.value=m/u,n.type=l,q=a.createGain(),q.gain.value=-999,n.connect(q),q.connect(w.detune),n.start(),n.stop(t+b));k?(n=a.createBiquadFilter(),n.type=k<f?"highpass":"lowpass",n.Q.value=0,n.frequency.value=k/u,w.connect(n),n.connect(v)):w.connect(v);v.connect(a.destination);w.start();w.stop(t+b);w.onended=()=>{[v].map(Aa)}};let Aa=a=>{a&&a.disconnect()},Ca=(a,b,e,d,f,g,k)=>{a.gain.value=0;a.gain.setValueAtTime(0,b);a.gain.linearRampToValueAtTime(e,b+f);a.gain.linearRampToValueAtTime(d,b+g);a.gain.linearRampToValueAtTime(0,b+k)},Da=a=>{var b=a.sampleRate,e=.05*b|0,d=a.createBuffer(1,e,b);for(b=d.getChannelData(0);e--;)b[e]=2*Math.random()-1;return f=>{var g=a.createBufferSource();g.buffer=d;g.loop=!0;var k=a.createBiquadFilter();k.type="lowpass";k.Q.value=0;k.frequency.value=2E3;var l=a.createGain();Ca(l,a.currentTime,.1*f,.05*f,.01,.05*.2,.05);g.connect(k);k.connect(l);l.connect(a.destination);g.start();g.stop(a.currentTime+.05);g.onended=()=>{l&&l.disconnect()}}},qa=(a,b)=>{let e=.2*b.length,d=a.sampleRate;var f=a.createBuffer(1,e*d|0,d),g=f.getChannelData(0);Ea(g,b,d);return k=>{var l=a.createBufferSource();l.buffer=f;var m=a.createGain();m.gain.value=.1*k;l.connect(m);m.connect(a.destination);l.start();l.stop(a.currentTime+e);l.onended=()=>{m&&m.disconnect()}}};var Fa={o:[12,15,0,10,10,0,3,6],i:[5,56,0,10,10,0,3,3],j:[5,56,0,10,10,0,1,3],u:[5,14,0,10,10,0,3,3],a:[18,30,0,10,10,0,3,5],e:[14,50,0,10,10,0,3,15],w:[3,14,0,10,10,0,3,1],v:[2,20,0,20,10,0,3,3],z:[5,28,80,10,5,10,3,3],b:[4,0,0,10,0,0,1,2],d:[4,40,80,10,10,10,1,2],m:[4,20,0,10,10,0,3,2],n:[4,40,0,10,10,0,3,2],r:[3,10,20,30,8,1,3,3],l:[8,20,0,10,10,0,3,5],g:[2,10,26,15,5,2,2,1],f:[8,20,34,10,10,10,3,4,1],h:[22,26,32,30,10,30,1,10,1],s:[80,110,0,80,40,0,3,5,1],p:[4,10,20,5,10,10,1,2,1,1],t:[4,20,40,10,20,5,1,3,1,1],k:[20,80,0,10,10,0,1,3,1,1]};let Ea=(a,b,e)=>{for(var d=0,f=0;f<b.length;f++){var g=b.charAt(f),k=Fa[g];if(k){g=k[7];for(var l=e/15*k[6],m=0;3>m;m++){var n=k[m],t=50/e*n;if(n)for(var u=n=0,w=1-10*Math.PI/e*k[m+3],v=d,q=0,p=0;p<l;p++){var r=Math.random()-.5;k[8]||(q=120*Math.PI/e*p,r=.5-(q-Math.floor(q/(2*Math.PI))*Math.PI*2)/(2*Math.PI),q=0);r=r+2*Math.cos(2*Math.PI*t)*n*w-u*w*w;u=n;n=r;q=r=.75*q+r*g;r=r/128-1;a[v++]=a[v]/2+r;a[v++]=a[v]/2+r}}d+=3*l/4<<1;k[9]&&(d+=l&16777214)}else" "==g&&(d+=Math.floor(.2*e))}},U=(a,b=30,e=30,d=1,f=1)=>{let g=[[a,b,e+9],[a,b-9,e],[a,b,e-9]],k=Ga(32*d,32*f);return(l,m,n)=>[{id:n(),O:k,la:g,aa:2,U:0,fa:-1,C:[l,m,d,f]}]},Ja=a=>(b,e,d)=>[{id:d(),aa:3,U:2,fa:16776975,C:[b+a+(1-.9)/2,e+1-1,.9,1],Z:[0,0,0,0],wa:1,T:[0,0,0,0,0],W:2,H:[0,0],O:Ha,la:Ia,Ka:1}],Ma=()=>(a,b,e)=>[{aa:1,O:Ka,la:La,C:[a+0,b+1-2,1,2],fa:11145103,U:5,wa:0,id:e(),T:[0,0,0,0,0],W:0,Pa:0,ca:0,H:[0,0],ja:.002,Z:[0,0,0,0],facing:0,Da:0,ha:{ya:{},X:{}},L:{},ba:0,ta:[],ka:[10,28]}],Na=(a,b)=>(e,d,f)=>{e=a(e,d,f);localStorage.getItem(b)?e=[]:(e[0].bb=b,e[0].id=b);return e},V=(a,b,e)=>{let d=e%2?[11,12]:[13,14];return(f,g,k)=>[{aa:9,O:Ga(32*a,32*b),la:La,C:[f,g,a,b],fa:-1,U:0,wa:0,id:k(),T:[0,0,0,0,0],W:0,Pa:0,ca:0,H:[0,0],ja:.003,Z:[0,0,0,0],ha:{ya:{},X:{}},L:{},ba:0,ta:[],ka:[...d,10],Ka:1,direction:e,home:[f,g]}]},Qa=(a,b,e)=>[{O:Oa,la:Pa,aa:0,C:[a+.2,b+1-.8,.6,.8],U:4,fa:11145103,jb:215,wa:1,facing:1,Da:0,id:e(),W:1,H:[0,0],T:[0,0,0,0,0],ja:.006,Z:[0,0,0,0],Ka:1,ha:{ya:{},X:{}},L:{},ba:11,sa:12,ta:[],Fa:[],ka:F.map((d,f)=>f).filter(d=>F[d].M)}],Ta=(a,b)=>{var e=[60,80,70];let d=[[50,80,49],[50,71,40],[50,80,31],[50,80,21],[0,0,100]],f=Ra(32*a),g=b&&Sa(b,e);return(k,l,m)=>{let n=g&&g(k,l,m);return[{id:m(),O:f,la:d,aa:8,U:0,fa:-1,C:[k,l,a,1],ja:0,Z:[0,0,0,0],L:{[3]:n&&n[0]},ba:0,sa:3,ha:{ya:{},X:{}},T:[0,0,0,0,0],wa:0,W:0,Fa:[],H:[0,0],Xa:1,ka:[25,17,18,24]}]}},Wa=a=>{var b=[60,80,70];let e=a&&Sa(a,b);return(d,f,g)=>{let k=e&&e(d,f,g);return[{O:Ua,Xa:1,ja:0,C:[d+0,f+1-.75,1,.75],Z:[0,0,0,0],U:6,fa:0,wa:0,L:{[1]:k&&k[0]},id:g(),ha:{ya:{},X:{}},aa:6,T:[0,0,0,0,0],ba:0,sa:1,W:0,la:Va,H:[0,0],Ra:1,Ga:0,Fa:[],ka:[25,17,18,23,24]}]}},Ya=a=>(b,e,d)=>[{aa:1,O:Xa,la:La,C:[b+(1-.9)/2,e+1-.9,.9,.9],fa:11145103,U:5,wa:1,id:d(),T:[0,0,0,0,0],W:1,Pa:0,ca:0,H:[0,0],ja:.002,Z:[0,0,0,0],facing:a,Da:0,ha:{ya:{},X:{}},L:{[7]:void 0},ba:5,sa:7,ta:[],tb:1,ka:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,16,17,18,20,21,24,25]}],Za=[1,2],$a=a=>(b,e,d)=>a.reduce((f,g)=>[...f,...g(b,e,d)],[]),cb=()=>{let a=ab(),b={r:U(0),y:U(220),g:U(120),c:U(180),b:U(240),p:U(300),w:U(0,0,90),k:U(0,0,20),a:Ja(0),"^":a,m:Ma(),d:V(1,2,1)},e=[[bb(Object.assign({},b,{4:Ta(1,[28,27,12])}),"yyyyyyyyyyyyyyyyyyy                yy                yy                yy                yy                yy                yy                yy                yy                yy                yy           4     yy   yyyyyyyyyyyyy",[60,20,90]),bb(Object.assign({},b),"yyyyyyyyyyyyyyyyyyy                yy                yy                yy                yy                yy                yy                yy                yy                yy                y                 yyyyyyyyyyyyyyyyyyy",[60,20,80])],[bb(Object.assign({},b,{1:Wa([,,,13,,,]),2:Wa([13,,13,,13,,13,,13,,13,,14,,14,,14,,14,,14,,14,,]),3:$a([Ya(0),a])}),"yyyyyyyyyyyyyyyyyyy                yy     1          yyyyy     yyyyyyyyyy        y       yy        y       yya       y       yyyyyyyyyyy       yy                 y                yy                yy                yy   yyyyyyyyyyyyyy",[30,20,60]),bb(Object.assign({},b,{1:Wa([,,14,,,,]),2:Ta(1,[13]),3:Ta(1,[15]),4:Ta(1,[12]),A:Ja(.1),P:Na(Qa,1),R:Ya(1),F:Na(V(2,1,3),2)}),"yyyyyyyyyyyyyyyyyyy                yy  y          1  yy  y       y  P  yy  yyyyyyyyy3yyy2yy            a   yy  yyyy     yy   yyyyyF yyyy  y    y  R     yy^^y    yy4y     yyyyyy4  yy        a       yy     ^^^yyyyyy^^yy  yyyyyyyyyyyyyyy",[240,80,80])],[bb(Object.assign({},b,{Y:U(220,void 0,void 0,1,.6),1:Ta(2,[25]),2:V(2,1,0),3:V(2,1,2),4:V(1,4,1),5:V(1,4,3)}),"y   yyYYYYYYYYYyyyy5 5yy 5 5 5 5    y   yy           yy   y            yy   y y 4 4 4 41 yy   y            yy   yy           yy   yy           yy 4 YYYYYYYYYYY  yy       3 2      yy  2           3 yy       3 2      yyyyyyyyyyyyyyyyyyy",[30,20,60]),bb(Object.assign({},b,{1:Ta(3,[28,11,29,,,12]),R:Ya(0)}),"y  yyyybbbbbbbbbbb     y           byy   y           byy   y           byy   y           by   dybbbbbbbbbbbbym              R yy1  ybbbbbbbb  bb                 bbb bbbbbbbbbbbb  bbb bb             bb               bbbbbbbbbbbbbbbbbbb",[30,20,60])]];return{ib:(d,f,g)=>e[f][d](d,f,g),qb:2,pb:3,zb:2,Ab:3,xb:0,yb:1}},bb=(a,b,e)=>{let d=b.length/18|1;return(f,g,k)=>{let l={La:[],backgroundColor:e,C:[f,g,18,d],kb:fa,fb:da(18,d,()=>[]),Aa:[]};b.split("").forEach((m,n)=>{(m=a[m])&&m(n%18,n/18|0,k).forEach(t=>W(l,t))});Za.forEach(m=>{if(m=localStorage.getItem(m)){let [n,t,u]=JSON.parse(m);n==f&&t==g&&W(l,u)}});return l}},ab=()=>(a,b,e)=>{e=e();{var d=[];let f=4*Math.random()|8;for(let g=0;g<=f;g++){let k=g/f-.5;d.push({J:0,I:[{B:1,D:32*(g+(2*Math.random()-1))/f-16-3*k,G:14},{B:0,da:(Math.random()+2)/3,ea:(Math.random()+2.5-Math.abs(k))/2},{B:2,K:Math.PI*(Math.random()-.5)/9+k*Math.PI/9}]})}d={ra:32,qa:8,pa:[[[0,-12,4,0,-4,0,0,1]]],ua:d}}return[{id:e,O:d,la:db,aa:7,U:1,fa:-1,C:[a+0,b+1-.25,1,.25]}]},Sa=(a,b)=>{let e=[b,[0,0,25],[0,0,100]];return(d,f,g)=>[{aa:5,O:eb,la:e,C:[d+(1-.42)/2,f+1-.27,.42,.27],U:3,fa:3855,wa:1,id:g(),T:[0,0,0,0,0],W:.05,Z:[0,0,0,0],H:[0,0],eb:.4,facing:0,Da:0,rb:[...a]}]};let hb=(a,b,e,d,f,g)=>{if(g){fb(a,b);let k=b.za-f;b.za=f;Q(b.C,b.H,gb(k),b.C)}b.H[d]+=e;[...b.oa,...b.na].forEach(k=>!d&&hb(a,k,e,d,f,1));g&&ib(a,b)},jb=a=>{if(a.Z){let b=a.za;b?(Q(a.C,a.H,([e],[d])=>e+Math.min(0,d*b)-1E-7,a.Z),Q(a.C,a.H,([,e],[d])=>e+Math.abs(d*b)+2E-7,a.Z,2)):a.Z=[...a.C]}},X=(a,b,e)=>{a&&b&&a.H&&b.H&&(ba(a.oa,b),ba(a.na,b),e?(a.na.push(b),b.$=a):b.$==a&&(b.$=void 0))},Y=(a,b)=>(a.W||b)&&[...a.na,...a.oa].reduce((e,d)=>e+Y(d),a.W)||0,gb=a=>([b],[e])=>b+e*a,kb=(a,b,e)=>{if(b.H&&b.za>e){fb(a,b);let d=b.za-e;b.za=e;Q(b.C,b.H,gb(d),b.C);ib(a,b)}},lb=(a,b,e,d,f,g)=>{let k=oa[b],l=f();!a.Ea[k]&&l&&(null!=a.O.ia[k]?a.Ea[k]={resolve:m=>{f()==l&&(g(l,m),Z(a,b,e))},startTime:d}:(g(l,d),Z(a,b,e)))},Z=(a,b,e,d)=>{d?a.Fa.unshift(b):(b=e[b])&&b(a.W||1)},nb=(a,b,e,d)=>{let f=new Set;mb(a,b,g=>g.forEach(k=>{!f.has(k.id)&&va(d&&k.Z||k.C,b)&&(e(k),f.add(k.id))}))},mb=(a,b,e)=>{ca(b,a.C,(d,f)=>{e(a.fb[d][f],d,f)})},W=(a,b,e)=>{e&&Q(e,b.C,([d],[f])=>f+d,b.C);a.La.push(b);b.H&&a.Aa.push(b);ib(a,b);e&&[...b.na,...b.oa].forEach(d=>W(a,d,e))},ib=(a,b)=>{b.Ca||(jb(b),mb(a,b.Z||b.C,e=>e.push(b)))},ob=(a,b,e)=>{ba(a.La,b);(b.H||b.O)&&ba(a.Aa,b);fb(a,b);e&&[...b.na,...b.oa].forEach(d=>ob(a,d,1))},fb=(a,b)=>{mb(a,b.Z||b.C,e=>{ba(e,b)})};let qb=(a,b,e)=>{let [d,f]=b.Za,g=[d-0,f-0,0,0],k=[0,0,...b.size];ca(g,k,(l,m)=>{var n=d==l&&f==m;n=pb(a,b,b.Wa[l][m],n?b.lb:{},n&&e);let [t,u]=b.size;n.forEach((w,v)=>{let q=ta[v],p=l+q[0],r=m+q[1];if(0<=p&&0<=r&&p<t&&r<u){let x=b.Wa[p][r];w.forEach(A=>{let y=1;0==A.aa&&(b.Za=[p,r],y=0);let G=Q([...q,...x.C],A.C,([E,,H],[M,R])=>0<E?1-R+y-M:0>E?H-1-y-M:0);W(x,A,G)})}})});b.Ba+=19},rb=(a,b)=>{for(;a;)if(a=a.$,a==b)return 1},sb=(a,b)=>(rb(a,b)||0)-(rb(b,a)||0)||b.C[1]-a.C[1],pb=(a,b,e,d,f)=>{e.Aa.sort(sb);let g=b.Ba;for(var k of e.Aa)tb(k,b,e,d);let l=19;for(;;){let q=l,p,r,x;e.Aa.forEach(B=>{kb(e,B,l);B.H&&!B.Ca&&nb(e,B.Z,C=>{if(C!=B&&(C!=p||B!=r)){kb(e,C,l);var N=Q(B.H,C.H||[0,0],([z],[D])=>z-D);let [S,O]=Q([...N,...B.C],C.C,([z,D,K],[P,L])=>{if(0<z)return(P-(D+K))/z;if(0>z)return(D-(P+L))/-z});if(null!=S||null!=O){let z,D;(null==O||S>=O)&&0<=S?(z=S,D=0<N[0]?2:0):(null==S||O>S)&&0<=O&&(z=O,D=0<N[1]?3:1);N=B.fa>>4*C.U+D&C.fa>>4*B.U+(D+2)%4&1;if(null!=z&&z<=q&&N){var I=gb(z);N=Q(B.C,B.H,I,[...B.C]);I=Q(C.C,C.H||[0,0],I,[...C.C]);ua(N,I)[(D+1)%2]&&(q=z,p=B,r=C,x=D)}}}},1)});if(!p)break;l-=q;fb(e,p);fb(e,r);b=r;p.va!=r&&(p.va=void 0);r.va!=p&&(r.va=void 0);var m=p.T[(x+2)%4]<g&&b.T&&b.T[x]<g;let A=p.H,y=b.H||[0,0];d=x%2;k=(x+2)%4;var n=(d+1)%2,t=gb(q);Q(p.C,A,t,p.C);Q(r.C,y,t,r.C);t=Y(p);let G=Y(b);var u;if(p.Na&&b.Na)var w=u=0;else u=p.Na,w=b.Na;u=G&&!u?t||1:0;w=t&&!w?G||1:0;u||w||(u=w=1);p.T[x]=g+l;let E=A[d]-y[d];n&&p.$!=b.$&&(w&&(0>E&&0==x||0<E&&2==x||p.$==r)&&X(p.$,p),u&&(0>E&&2==x||0<E&&0==x||b.$==p)&&X(b.$,b));n=ub(p,r,g+q);let H=ub(r,p,g+q),M=Math.max(p.eb||.1,b.eb||.1),R=(y[d]*w+A[d]*u)/(u+w);n&&hb(e,p,(m?R-w*M*E/(u+w):0<A[d]&&2>x||0>A[d]&&1<x?A[d]:0)-p.H[d],d,l);H&&(m=m?R+u*M*E/(u+w):0<y[d]&&1<x||0>y[d]&&2>x?y[d]:0,b.H&&(b.T[k]=g+l,hb(e,b,m-b.H[d],d,l)));n&&H&&(3==x&&t&&w&&X(r,p,1),1==x&&G&&u&&X(p,r,1));b.za=p.za=l;ib(e,p);ib(e,r)}e.La.sort((q,p)=>p.U-q.U);a.fillStyle=ja(e.backgroundColor);a.fillRect(0,0,e.C[2],e.C[3]);let v=[[],[],[],[]];e.La.forEach(q=>{q.T&&q.T[3]+40<g&&!q.Ja&&(q.Ja=3);q.va&&(q.T[4]=g+19,X(q.va,q,1));kb(e,q,0);var p=Q(q.C,e.C,([r,x],[A,y])=>A+Math.floor((r+x/2)/y));if(!q.$&&!aa(p,e.C)){if(!q.Ca){let [r,x]=e.C,[A,y]=p,G=A-r,E=y-x;p=ta.findIndex(([H,M])=>H==G&&M==E);0<=p&&v[p].push(q)}ob(e,q,1)}if(f){a.save();let [r,x,A]=q.C;a.translate(r+A/2,x);vb(a,q,g+19);a.restore()}});return v},vb=(a,b,e,d=1,f=1)=>{let [,,g,k]=b.C;if(b.O){if(b.Ma!=b.Ja){var l=b.O.ia&&b.O.ia[b.Ma];b.nb=l&&l.S||0;b.Ma=b.Ja;b.hb=e}l=1;null!=b.facing&&(l=2*Math.min(1,(e-b.Da)/150)-1,l=0<l?Math.max(.2,l):Math.min(-.2,l),l=b.facing?l:-l);let t=g/(b.O.ra*d),u=k/(b.O.qa*f);a.save();a.scale(t*l,u);if(b.Ma&&(d=b.O.ia&&b.O.ia[b.Ma])){var m=e-b.hb;var n=b.nb;n<d.S&&(m-=n);0<=m?(n=Math.floor(m/d.S),d.Ia?(f=d.N.length*d.S,Math.floor(n/d.N.length)>=d.Ia&&(n=d.N.length-1),m=Math.min(m-n*d.S,f)):(m-=n*d.S,n%=d.N.length),m/=d.S,n=d.N[n]):(m=1-m/n,n=d.N[d.N.length-1])}b.Ya!=n&&(b.cb=b.Ya,b.Ya=n);let w=[];b.Ea&&ea(b.Ea,(v,q)=>{q=b.O.ia[q];v=(e-v.startTime)/q.S;let p,r;v<q.N.length?(p=v|0,v-=p,r=p-1):(p=q.N.length-1,v=q.N.length-v+1,r=-1);w.push({Sa:q.N[p],progress:v});0<=r&&w.push({Sa:q.N[r],progress:1-v})});null!=n&&w.unshift({Sa:n,progress:m});null!=b.cb&&1>m&&w.unshift({Sa:b.cb,progress:1-m});la(a,b.O,b.la,(v,q)=>{(q=b.L&&b.L[q.id])&&vb(v,q,e,t,u)},w);a.restore()}b.Oa&&b.ab>e-3E3&&(m=b.Oa.slice(-1).map(pa).join(""),d=a.measureText(m).width,n=d+.4,d=-d/2-.2,f=1-(e-b.ab)/3E3,a.globalAlpha=f*f,a.beginPath(),a.moveTo(d+.2,-1.3),a.arcTo(d+n,-1.3,d+n,-1.1,.2),a.arcTo(d+n,-.4,d+n-.2,-.4,.2),a.lineTo(.1,-.4),a.lineTo(0,-.2),a.lineTo(-.1,-.4),a.arcTo(d,-.4,d,-1.1,.2),a.arcTo(d,-1.3,d+.2,-1.3,.2),a.fillStyle="#fff",a.fill(),a.strokeStyle=a.fillStyle="#333",a.stroke(),a.globalAlpha=f,a.fillText(m,0,-.2-.4),a.globalAlpha=1)},tb=(a,b,e,d)=>{fb(e,a);let f=b.Ba;var g=a.L&&a.L[a.sa];g=g&&g.rb;if(a.Fa&&a.Fa.length&&(f/1E3|0)<((f+19)/1E3|0)){let y=a.Fa.pop();if(null!=y){var k=F[y].sb;let [,,G,E]=e.C,H=da(G,E,()=>0),M=[[a.C[0]|0,a.C[1]|0]];for(;M.length;){let [B,C]=M.pop();if(0<=B&&0<=C&&B<G&&C<E&&!H[B][C]){let N=[B,C,1,1];var l=e.fb[B][C].find(I=>.8<va(I.C,N)&&(0==I.U||2==I.U));l?H[B][C]=l.id:(H[B][C]=-1,ta.forEach(([I,S])=>{M.push([B+I,C+S])}))}}let R;e.Aa.forEach(B=>{let [C,N]=B.C,I=H[C|0][N|0];if(0>I||I==B.id)R=R||0==B.aa,B.ta&&B!=a&&(B.ta.push(y),B.ub=f)});R&&(a.Oa=a.Oa||[],a.Oa.push(y),k(a.W||1,1),a.ab=f)}}a.Ea=a.Ea||{};ea(a.Ea,(y,G)=>{let E=a.O.ia[G],H=y.startTime+E.S*E.N.length;H<f+19&&(H>=f&&y.resolve(f),H+E.S<f+19&&delete a.Ea[G])});a.va=void 0;a.H&&(a.za=19,Q(a.H,e.kb,([y],[G])=>y+G*a.wa*19,a.H),a.H=a.H.map(y=>Math.min(Math.max(y,-.015),.015)));k=f-a.T[3];var m=f-a.T[4],n=Math.min(k,m);l=[0,0];var t=a.facing;let u;let w;if(a.H){a.oa&&a.oa.forEach(y=>X(y.$,y));if(a.$){l=a.$.H||l;var v=a.$;t=null!=v.facing&&v.Da>a.Da?v.facing:t}a.oa=a.na||[];a.na=[]}let q=t;if(a.ha&&!a.Ca){var p=a.ha;let y;var r;switch(a.aa){case 1:case 9:if(a.Pa<f){var x=0;for(t=a.ca;!x;)if(v=t,t=v+1,v=a.ta&&a.ta.pop()||(g&&v<g.length?g[v]:10),p.X={},0<=a.ka.indexOf(v))switch(v){case 13:case 14:case 11:case 12:x=(A||1)/a.ja;p.X[v]=f;break;case 10:x=1E3*(A||1);break;case 17:case 18:p.X[v]=f;x=200*(A||1);break;case 28:b.Wa.forEach((z,D)=>z.forEach((K,P)=>K.Aa.forEach(L=>{if(L.bb){let za=Object.assign({},L,{C:0==L.aa?[a.C[0],a.C[1],L.C[2],L.C[3]]:L.C,oa:[],na:[],$:void 0,va:void 0,L:{},inputs:{X:{},ya:{}},vb:0});localStorage.setItem(L.bb,JSON.stringify([D,P,za]))}})));localStorage.setItem("w",f);b.mb=f;break;default:var A=10*(A||0)+v}else A=0;a.Pa=f+x;a.ca=t}break;case 6:p.X[25]=f;break;case 8:p.X[25]=Y(a,1)|0||a.ca<g.length?f:0;break;case 0:J(a,27,f)&&(a.gb=!a.gb)}t=100>=n;v=J(a,13,f);let G=J(a,14,f);p=Y(a)||1;let E=p<2*a.W,H=a.tb?a.ja:a.ja/p;19>k&&(r=1);b=J(a,11,f);A=J(a,12,f);y=J(a,15,f);u=J(a,20,f);let M=J(a,21,f);n=J(a,22,f);let R=J(a,23,f),B=J(a,24,f),C=J(a,25,f);w=J(a,26,f);p=J(a,17,f);x=J(a,18,f);if(a.Ka||t)if(a.H[0]=(G-v)*H+l[0],v){if(t||!a.W)r=2,sa(a,13,f)&&Z(a,13,d);q=0}else G&&(q=1,t||!a.W)&&(r=2,sa(a,14,f)&&Z(a,14,d));a.L[a.sa]&&(p?(r=9,sa(a,17,f,200)&&0<a.ca&&(a.ca--,Z(a,17,d))):x?(r=9,sa(a,18,f,200)&&a.ca<g.length&&(a.ca++,Z(a,18,d))):w?(r=9,a.Ha||(a.Ga||(a.Ga=f),Z(a,26,d)),a.Ha=1):C&&(r=9,a.Ra||(a.Ga=f,a.ca=a.ca%g.length,Z(a,25,d)),a.Ra=1));w||(a.Ha=0);C||(a.Ra=0);let [N,I,S]=a.C;y&&t&&E&&(a.H[1]=-.014,a.T[3]=0,a.T[4]=0,Z(a,15,d),k=20);b&&(19>=m||!a.W)&&(a.H[1]=a.W?-.011:-a.ja,a.T[4]=0,k=20);a.W||(A?a.H[1]=a.ja:b||(a.H[1]=0));M&&a.L&&lb(a,21,d,f,()=>a.L[a.ba],z=>{z.H=[0,0];delete a.L[a.ba];Q(a.C,z.C,([D,K],[,P])=>D+(K-P)/2,z.C);W(e,z)});R&&a.L&&lb(a,23,d,f,()=>!a.L[a.sa]&&a.L[a.ba],z=>{a.L[a.sa]=z;delete a.L[a.ba]});B&&a.L&&(m=a.L[a.sa])&&(t=Y(m),m.H=[3E-4*(q-.5)/t,-3E-4/t],delete a.L[a.sa],Q(a.C,m.C,([z,D],[,K])=>z+(D-K)/2,m.C),m.facing=a.facing,W(e,m),Z(a,24,d));n&&lb(a,22,d,f,()=>a.oa[0]||a.na[0]||a.L&&a.L[a.ba],z=>{let D=Y(z);z.H=[.02*(2*q-1)/D,-.02/D];a.L[a.ba]==z&&(delete a.L[a.ba],Q(a.C,z.C,([K,P],[,L])=>K+(P-L)/2,z.C),z.facing=a.facing,W(e,z));X(a,z)});a.Na=19<k&&a.W;let O;if(!A&&0<a.H[1]&&(19<k||b)){let z=N+S*q;let D=0;nb(e,[z-.15,I-.15,.3,.3],K=>{if(1<<K.U&a.jb){D++;let [P,L,za]=K.C;(.075>Math.abs(P+(q+1)%2*za-z)||6==K.U)&&.15>Math.abs(L-I)&&(O=K)}});if(1==D&&O){let [K,P,L]=O.C;a.H=[(6==O.U?0:K+(q+1)%2*(L+.02)-z-.01)/19+l[0],(P-I-.01)/19];a.va=O;r=4}}a.Ja=r}else a.H&&(19>=k||a.Ka)&&0<a.H[1]&&(a.H[0]=l[0]);a.facing!=q&&null!=q&&(a.facing=q,a.Da=f);!a.Ra&&!a.Ha||x||p||(r=f-a.Ga,(r/1E3|0)<((r+19)/1E3|0)&&(r=a.ca||0,r<g.length?(a.Ha?(g[r]=a.ta[0],a.ta=[]):Z(a,g[r],d,f),a.ca=r+1):a.Xa&&!a.Ha?a.ca=0:a.Ga=0));nb(e,a.C,y=>{u&&(lb(a,20,d,f,()=>3==y.U&&a.L&&!a.L[a.ba],()=>{ob(e,y);a.L[a.ba]=y}),u=0)});a.Ca&&(a.Ja=10);ib(e,a)},ub=(a,b,e)=>7==b.aa?(a.H=[0,-.015],a.Ca=e,0):1,wb=(a,b,e,d)=>{let f=99;let g=()=>f++;let k,l,m;let n=da(b,e,(u,w)=>{let v=d(u,w,g),q=v.Aa.find(p=>0==p.aa);q&&(k=q,l=u,m=w);return v}),t={[15]:T(a,.3,.2,"triangle",500,700,400,"sine",60),[22]:T(a,.2,.2,"triangle",500,2E3,599),[10]:Ba(a,350,440),[17]:T(a,.2,.1,"sine",1440,2999,999,"sawtooth",200),[18]:T(a,.2,.1,"sine",2999,1440,2E3,"triangle",200),[13]:Da(a),[14]:Da(a),[24]:T(a,.2,.2,"triangle",300,2E3,599),[21]:T(a,.2,.2,"triangle",200,2E3,599),[20]:T(a,.2,.2,"triangle",700,2E3,599)};for(let u=0;10>u;u++)t[u]=Ba(a,ha[u%ha.length],ia[(u/ha.length|0)%ia.length]);ra(a);a=parseInt(localStorage.getItem("w")||0);return{Za:[l,m],size:[b,e],Wa:n,wb:f,Ba:a,Qa:k,lb:t}},Ga=(a,b)=>({ra:a,qa:b,pa:[[[-a/2,0,a,b,1,4],[-a/2,0,a-2,b-2,0,4],[2-a/2,2,a-2,b-2,2,4],[2-a/2,2,a-4,b-4,1,4]]],ua:[{J:0}]}),Ia=[[30,30,60],[30,30,50],[30,30,40]],Ha={ra:16,qa:16,pa:[[[-7.5,-1.5,15,3,1],[-8,-1,1,2,0],[-7,-2,14,1,0],[7,-1,1,2,2],[-7,1,14,1,2]]],ua:[{id:0,I:[{B:1,D:0,G:2}],ga:[{J:0,I:[{B:1,D:0,G:4}]},{J:0,I:[{B:1,D:0,G:8}]},{J:0,I:[{B:1,D:-6,G:6},{B:0,da:1,ea:-1},{B:2,K:-Math.PI/2}]},{J:0,I:[{B:1,D:6,G:6},{B:0,da:1,ea:-1},{B:2,K:-Math.PI/2}]},{J:0},{J:0,I:[{B:1,D:0,G:12}]}]}]},Ka={ra:32,qa:48,pa:[[[-16,-16,32,32,1,4],[-16,-16,30,30,0,4],[-14,-14,30,30,2,4],[-14,-14,28,28,1,4]],[]],ua:[{J:0,I:[{B:1,D:0,G:16}]}]},Pa=[[40,5,60],[40,5,40],[120,40,30],[40,5,10],[0,100,40]],Oa={ra:22,qa:30,pa:[[[0,0,20,26,0],[2,6,16,8,1],[3,0,14,4,3],[3,0,3,4,4],[3,16,2,2,1],[9,16,2,2,1],[15,16,2,2,1],[3,21,2,2,1],[9,21,2,2,1],[15,21,2,2,1]],[[-8,0,8,26,1]],[[-2,0,4,2,3],[-3,2,8,2,3]],[[-2,0,4,8,3]],[[-.5,-1,1,2,3],[-1,-.5,2,1,3]],[[-5,-4,2,4,1],[15,-4,2,4,1],[-5,-4,22,2,1]]],ua:[{id:0,I:[{B:1,D:-6,G:0}],ga:[{id:3,J:2,I:[{B:1,D:0,G:26}]},{id:4,J:2,I:[{B:1,D:14,G:26}]},{id:7,ga:[{id:1,J:0,ob:[{id:6,J:3,I:[{B:1,D:18,G:8}]},{id:10,J:5}],ga:[{id:8,J:4,I:[{B:1,D:7,G:10}]},{id:9,J:4,I:[{B:1,D:14,G:10}]},{id:12,I:[{B:1,D:10.5,G:6}]}]},{id:2,J:1,ga:[{id:5,J:3,I:[{B:1,D:-5,G:8}],ga:[{id:11,I:[{B:1,D:0,G:6}]}]}]}]}]}],Va:[{[0]:[{B:1,D:-6,G:0},{B:2,K:Math.PI/20}],[1]:[{B:0,da:1.2,ea:1}],[2]:[{B:0,da:.6,ea:1}],[3]:[{B:1,D:0,G:-6},{B:2,K:Math.PI/5}],[5]:[{B:2,K:-Math.PI/3}],[6]:[{B:2,K:Math.PI/3}],[10]:[{B:0,da:.8,ea:1},{B:1,D:3,G:0}]},{[0]:[{B:1,D:6,G:0},{B:2,K:-Math.PI/20}],[1]:[{B:0,da:.6,ea:1}],[2]:[{B:0,da:1.2,ea:1}],[3]:[{B:1,D:-4,G:0}],[4]:[{B:1,D:-4,G:-6},{B:2,K:Math.PI/5}],[5]:[{B:2,K:Math.PI/3}],[6]:[{B:2,K:-Math.PI/3}],[10]:[{B:0,da:.7,ea:1}]},{[3]:[{B:2,K:Math.PI/8}],[4]:[{B:2,K:-Math.PI/8}],[5]:[{B:2,K:2*Math.PI/3}],[6]:[{B:2,K:2*-Math.PI/3}]},{[7]:[{B:1,D:0,G:-2},{B:0,da:.95,ea:1.1}]},{},{[0]:[{B:1,D:-6,G:0},{B:2,K:-Math.PI/10}],[5]:[{B:2,K:Math.PI/10}],[6]:[{B:2,K:-Math.PI/3}]},{[5]:[{B:2,K:-Math.PI/2}],[11]:[{B:2,K:Math.PI/2}]},{[7]:[,{B:0,da:1.1,ea:.8},{B:1,D:0,G:10}],[5]:[{B:2,K:-Math.PI/4}]},{[0]:[,{B:2,K:-Math.PI/4,Ta:3,Ua:26}],[7]:[{B:0,da:1.2,ea:.8},{B:1,D:0,G:10}],[5]:[{B:2,K:3*Math.PI/4}],[4]:[{B:2,K:Math.PI/4}]},{[0]:[{B:2,K:Math.PI/4,Ta:10,Ua:26}],[7]:[{B:0,da:.9,ea:1.2},{B:1,D:0,G:-4}],[5]:[{B:2,K:3*Math.PI/2}],[4]:[{B:2,K:-Math.PI/4}]},{[5]:[{B:2,K:-Math.PI/3}]},{[5]:[{B:2,K:3*-Math.PI/4},{B:1,D:0,G:4}]}],ia:{[2]:{S:300,N:[0,1]},[3]:{S:400,N:[2],Ia:1},[1]:{S:1E3,N:[3,4]},[4]:{S:100,N:[5],Ia:1},[5]:{S:300,N:[6]},[6]:{S:200,N:[7]},[7]:{S:180,N:[8,9]},[8]:{S:200,N:[10]},[9]:{S:300,N:[11],Ia:1},[10]:{S:100,N:[2]}}},Ra=a=>{let b=[0,0,4,4],e=[4,4],d=[];let f=a/16;let g=(a-4*f)/(f+1);let k=0;for(;f--;)k+=g,d.push([k,-2,4,2,2]),k+=4;return{ra:a,qa:32,pa:[[...d,[0,0,a,26,1,b],[0,0,a-2,24,0,b],[2,1,a-2,25,2,b],[2,1,a-4,23,1,b],[9,6,14,9,3],[12,10,1,1,4],[18,10,1,1,4]],[[0,0,a,6,1,e],[0,0,a-2,6,0,e],[2,2,a-2,4,2,e],[2,2,a-4,3,1,e]]],ua:[{id:0,J:0,I:[{B:1,D:-a/2,G:6}]},{id:1,J:1,I:[{B:1,D:-a/2,G:-2}]},{id:3,I:[{B:1,D:16-a/2,G:12}]}],Va:[{[1]:[{B:1,D:0,G:2}]}],ia:{[9]:{S:100,N:[0],Ia:1}}}},Va=[[210,30,70],[210,20,60],[210,30,50],[0,0,30],[210,30,30],[0,0,100]],Ua={ra:32,qa:24,pa:[[[-16,-12,32,24,2,5],[-15,-11,30,22,1,4],[1.5,-6.5,12,12,2,6],[2.5,-5.5,12,12,0,6],[2,-6,12,12,3,6],[-13.5,-6,13,8,4],[-5,-3,2,2,5,1],[-11,-3,2,2,5,1]]],ua:[{id:0,J:0,I:[{B:1,D:0,G:12}]},{id:1,I:[{B:1,D:-7.5,G:5.5}]}]},La=[[0,40,50],[0,40,40],[0,40,20],[0,0,100]],Xa={ra:32,qa:32,pa:[[[-12,-28,32,16,0],[-12,-28,16,28,0]],[[-9,-10,18,12,1],[-7,-8,14,8,2]],[[-1,-.5,2,1,3],[-.5,-1,1,2,3]],[[-2,-3,4,6,2]],[[-2,0,4,6,2]]],ua:[{id:0,I:[{B:1,D:-10,G:0}],ga:[{id:3,J:4,I:[{B:1,D:-4,G:26}]},{id:4,J:4,I:[{B:1,D:4,G:26}]},{id:1,J:0,I:[{B:1,D:4,G:28}],ga:[{id:5,J:3,I:[{B:1,D:18,G:-10}]},{id:6,J:3,I:[{B:1,D:8,G:-10}],ga:[{id:8,I:[{B:1,D:0,G:5}]}]},{id:2,J:1,I:[{B:1,D:15,G:-12}],ga:[{J:2,I:[{B:1,D:3,G:-4}]},{J:2,I:[{B:1,D:-3,G:-4}]},{id:7,I:[{B:1,D:0,G:-9}]}]}]}]}],Va:[{[1]:[{B:2,K:-Math.PI/20}],[3]:[{B:1,D:0,G:-3}],[2]:[{B:2,K:Math.PI/20}]},{[1]:[{B:2,K:Math.PI/20}],[4]:[{B:1,D:0,G:-3}],[2]:[{B:2,K:-Math.PI/20}]}],ia:{[2]:{S:300,N:[0,1]}}},db=[[0,0,100],[0,0,40]],eb={ra:18,qa:12,pa:[[[-9,-6,18,12,1,[2,2]],[-8,-5,16,8,0],[-6,-3,12,4,1,2]],[[-1,-1,2,2,2,1]]],ua:[{id:0,J:0,I:[{B:1,D:0,G:6}],ga:[{J:1,I:[{B:1,D:-4,G:-1}]},{J:1,I:[{B:1,D:4,G:-1}]}]}]};onload=()=>{let a=new AudioContext,{ib:b,pb:e,qb:d}=cb();let f;f=wb(a,d,e,b);let g,k,l,m;let n=[c,o,s],t=()=>{k=Math.floor(innerWidth/innerHeight<17.6/12.6?innerWidth/17.6:innerHeight/12.6);l=17.6*k;m=12.6*k;c.width=l;c.height=m;g=c.getContext("2d");g.textAlign="center";g.font="0.5px fantasy";g.lineWidth=1/k;n.forEach(p=>p.setAttribute("style",`width:${l}px;height:${m}px`))};onresize=t;t();let u={};onkeydown=p=>{a.resume();u[p.keyCode]=u[p.keyCode]?u[p.keyCode]:f.Ba};onkeyup=p=>{u[p.keyCode]=0};let w,v=0;let q=p=>{var r=Math.min((p||0)-(w||0),38)+v,x=f.Qa.ha;x.X={};for(let A in na){let y=na[A];x.X[y]=Math.max(x.X[y]||0,u[A]||0)}for(;!(19>r);){r-=19;if(x=19>r)g.clearRect(0,0,l,m),g.save(),g.scale(k,k),g.translate(-.2,-.2);qb(g,f,x);x&&g.restore()}v=r;f.Qa.Ca&&J(f.Qa,15,f.Ba)&&(f=wb(a,d,e,b));r=f;o.style.opacity=f.Qa.Ca?"1":"0";s.style.opacity=r.mb>r.Ba-3E3?"1":"0";requestAnimationFrame(q);w=p};q()};</script>